<script src="//mallmaverick.cdn.speedyrails.net/javascripts/mapsvg/jquery.js"></script>
<script src="//mallmaverick.cdn.speedyrails.net/javascripts/mapsvg/raphael.js"></script>
<script src="//mallmaverick.cdn.speedyrails.net/javascripts/mapsvg/jquery.mousewheel.js"></script>
<script src="//mallmaverick.cdn.speedyrails.net/system/site_images/photos/000/005/107/original/mallmaverick_svgmap.js?1412885524"></script>
<script>
    $(document).ready(function(){
        init();
        function renderPage(){
            var stores = getStoresList();
            
            $("#mapsvg").show();
            regions = {}
            $.each(stores, function(key, val) {
                if(val.svgmap_region != null && typeof(val.svgmap_region)  != 'undefined'){
                    obj = {};
                    obj["popover"] = "<img class='tooltip_img' src='" + val.store_front_url_abs + "'/><label class='store_name_map'>" + val.name + "</label><div class='map_contact'><div class='map_contact_section'><img class='map_contact_phone_icon' src='//codecloud.cdn.speedyrails.net/sites/5907663d6e6f645a52000000/image/png/1493843868000/icon_phone20x22.png'><label class='map_contact_label'>" + val.phone + "</label><label class='map_label_right'>CLICK FOR MORE DETAILS</label></div></div>"
                    obj["attr"] = {}
                    regions[val.svgmap_region] = obj
                }
            });
            
            var map = $('#mapsvg').mapSvg({
                source: getSVGMapURL(),    // Path to SVG map
                colors: {stroke: '#aaaaaa', selected: -20, hover: "#000"},
                disableAll: false,
                regions: regions,
                tooltipsMode:'custom',
                loadingText: "loading...",
                zoom: true,
                zoomButtons: {'show': true,'location': 'right' },
                pan:true,
                cursor:'pointer',
                responsive:true,
                zoomLimit: [0, 10],
            });
        }
        loadMallDataCached(renderPage);
    });
</script>